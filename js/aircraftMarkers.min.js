let blueAircraftIconGroup=L.layerGroup(),aliveBlueMarkers,aliveRedMarkers,redAircraftIconGroup=L.layerGroup(),aircraftIcon=L.Icon.extend({options:{iconSize:[35,35],iconAnchor:[17,17],popupAnchor:[0,-15]}}),aircraftFighterIconBlue=new aircraftIcon({iconUrl:"images/icons/fighter-icon-blue-alt.png"}),aircraftAttackIconBlue=new aircraftIcon({iconUrl:"images/icons/attack-icon-blue-alt.png"}),aircraftTankerIconBlue=new aircraftIcon({iconUrl:"images/icons/tanker-icon-blue-alt.png"}),aircraftAwacsIconBlue=new aircraftIcon({iconUrl:"images/icons/awacs-icon-blue-alt.png"}),aircraftFighterIconRed=new aircraftIcon({iconUrl:"images/icons/fighter-icon-red-alt.png"}),aircraftAttackIconRed=new aircraftIcon({iconUrl:"images/icons/attack-icon-red-alt.png"}),aircraftTankerIconRed=new aircraftIcon({iconUrl:"images/icons/tanker-icon-red-alt.png"}),aircraftAwacsIconRed=new aircraftIcon({iconUrl:"images/icons/awacs-icon-red-alt.png"}),aircraftParachute=new aircraftIcon({iconUrl:"images/icons/parachute.png"});function updateBlueAircraftIcons(data){for(x in aliveBlueMarkers=[],data.objects)if(1===data.objects[x].Type.level1&&2===data.objects[x].CoalitionID){const fighterType=["L-39ZA","FA-18C_hornet","F-15C","F-5E-3","M-2000C","MiG-21Bis"],attackType=["A-10C","AJS37","AV8BNA","Su-25T","A-10A","Su-25A"],awacsType=["E-3A"],tankerType=["KC-135","KC130"],parachuteType=["Parachute"];let mapIconLat=data.objects[x].LatLongAlt.Lat,mapIconLong=data.objects[x].LatLongAlt.Long,newLatLng=new L.LatLng(data.objects[x].LatLongAlt.Lat,data.objects[x].LatLongAlt.Long),aircraftHeading=radiusToHeading(data.objects[x].Heading),playerType,unitCoalition;if(data.objects[x].UnitName&&data.objects[x].UnitName.length?(playerType=!0===data.objects[x].Flags.Human?"Player":"AI Pilot",data.objects[x].UnitName.includes("unit1")?unitName=data.objects[x].UnitName.slice(0,-5):unitName=data.objects[x].UnitName,data.objects[x].Coalition.toLowerCase().includes("enemies")&&(unitCoalition="Allies")):(playerType="Parachute",unitCoalition="Unknown"),data.objects[x].Name.toLowerCase().includes("pilot")){if("Parachute"===playerType){var customPopup='<table class="pixel-popup-table"><tr><td><strong>Player type:</strong></td><td class="right">'+playerType+'</td></tr><tr><td><strong>Unit type:</strong></td><td class="right">'+data.objects[x].Name+'</td></tr><tr><td><strong>Coalition:</strong></td><td class="right">'+unitCoalition+'</td></tr><tr><td><strong>Altitude:</strong></td><td class="right">'+Math.trunc(3.28*data.objects[x].LatLongAlt.Alt)+" FT</td></tr></tr></table>",customOptions={maxWidth:"500",className:"pixel-custom-popup"};let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftParachute}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedBlueMarkers.id.includes(data.objects[x].id)||spawnedBlueMarkers.id.push(data.objects[x].id),aliveBlueMarkers.push(data.objects[x].id),blueAircraftIconGroup.getLayer(data.objects[x].id)?(blueAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),blueAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup)):(blueAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.setZIndexOffset(-300),aircraftMarker.addTo(map))}}else{var customPopup='<table class="pixel-popup-table"><tr><td><strong>Name:</strong></td><td class="right">'+unitName+'</td></tr><tr><td><strong>Player type:</strong></td><td class="right">'+playerType+'</td></tr><tr><td><strong>Unit type:</strong></td><td class="right">'+data.objects[x].Name+'</td></tr><tr><td><strong>Coalition:</strong></td><td class="right">'+unitCoalition+'</td></tr><tr><td><strong>Altitude:</strong></td><td class="right">'+Math.trunc(3.28*data.objects[x].LatLongAlt.Alt)+' FT</td></tr></tr><tr><td><strong>Heading:</strong></td><td class="right">'+Math.trunc(aircraftHeading)+"°</td></tr></tr></table>",customOptions={maxWidth:"500",className:"pixel-custom-popup"};if(fighterType.includes(data.objects[x].Name)){let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftFighterIconBlue,rotationAngle:aircraftHeading,rotationOrigin:"center center"}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedBlueMarkers.id.includes(data.objects[x].id)||spawnedBlueMarkers.id.push(data.objects[x].id),aliveBlueMarkers.push(data.objects[x].id),blueAircraftIconGroup.getLayer(data.objects[x].id)?(blueAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),blueAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup),blueAircraftIconGroup.getLayer(data.objects[x].id).setRotationAngle(aircraftHeading)):(blueAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.addTo(map))}if(attackType.includes(data.objects[x].Name)){let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftAttackIconBlue,rotationAngle:aircraftHeading,rotationOrigin:"center center"}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedBlueMarkers.id.includes(data.objects[x].id)||spawnedBlueMarkers.id.push(data.objects[x].id),aliveBlueMarkers.push(data.objects[x].id),blueAircraftIconGroup.getLayer(data.objects[x].id)?(blueAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),blueAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup),blueAircraftIconGroup.getLayer(data.objects[x].id).setRotationAngle(aircraftHeading)):(blueAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.addTo(map))}if(awacsType.includes(data.objects[x].Name)){let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftAwacsIconBlue,rotationAngle:aircraftHeading,rotationOrigin:"center center"}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedBlueMarkers.id.includes(data.objects[x].id)||spawnedBlueMarkers.id.push(data.objects[x].id),aliveBlueMarkers.push(data.objects[x].id),blueAircraftIconGroup.getLayer(data.objects[x].id)?(blueAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),blueAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup),blueAircraftIconGroup.getLayer(data.objects[x].id).setRotationAngle(aircraftHeading)):(blueAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.addTo(map))}if(tankerType.includes(data.objects[x].Name)){let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftTankerIconBlue,rotationAngle:aircraftHeading,rotationOrigin:"center center"}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedBlueMarkers.id.includes(data.objects[x].id)||spawnedBlueMarkers.id.push(data.objects[x].id),aliveBlueMarkers.push(data.objects[x].id),blueAircraftIconGroup.getLayer(data.objects[x].id)?(blueAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),blueAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup),blueAircraftIconGroup.getLayer(data.objects[x].id).setRotationAngle(aircraftHeading)):(blueAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.addTo(map))}}}for(x in spawnedBlueMarkers.id)aliveBlueMarkers.includes(spawnedBlueMarkers.id[x])||blueAircraftIconGroup.clearLayers(spawnedBlueMarkers.id[x])}function updateRedAircraftIcons(data){for(x in aliveRedMarkers=[],data.objects)if(1===data.objects[x].Type.level1&&1===data.objects[x].CoalitionID){let fighterType=["MiG-29S","MiG-29A","Su-27","MiG-31","J-11A","MiG-21Bis"],attackType=["Su-25T","F-5E-3"],awacsType=["A-50"],tankerType=["IL-78M"],mapIconLat=data.objects[x].LatLongAlt.Lat,mapIconLong=data.objects[x].LatLongAlt.Long,newLatLng=new L.LatLng(data.objects[x].LatLongAlt.Lat,data.objects[x].LatLongAlt.Long),aircraftHeading=radiusToHeading(data.objects[x].Heading),playerType,unitCoalition;data.objects[x].UnitName&&data.objects[x].UnitName.length&&(playerType=!0===data.objects[x].Flags.Human?"Player":"AI Pilot",data.objects[x].UnitName.includes("unit1")||data.objects[x].UnitName.includes("unit2")||data.objects[x].UnitName.includes("unit3")?unitName=data.objects[x].UnitName.slice(0,-5):unitName=data.objects[x].UnitName,data.objects[x].Coalition.toLowerCase().includes("allies")&&(unitCoalition="Enemies"));var customPopup='<table class="pixel-popup-table"><tr><td><strong>Name:</strong></td><td class="right">'+unitName+'</td></tr><tr><td><strong>Player type:</strong></td><td class="right">'+playerType+'</td></tr><tr><td><strong>Unit type:</strong></td><td class="right">'+data.objects[x].Name+'</td></tr><tr><td><strong>Coalition:</strong></td><td class="right">'+unitCoalition+'</td></tr><tr><td><strong>Altitude:</strong></td><td class="right">'+Math.trunc(3.28*data.objects[x].LatLongAlt.Alt)+' FT</td></tr></tr><tr><td><strong>Heading:</strong></td><td class="right">'+Math.trunc(aircraftHeading)+"°</td></tr></tr></table>",customOptions={maxWidth:"500",className:"pixel-custom-popup"};if(!data.objects[x].Name.toLowerCase().includes("pilot")){if(fighterType.includes(data.objects[x].Name)){let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftFighterIconRed,rotationAngle:aircraftHeading,rotationOrigin:"center center"}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedRedMarkers.id.includes(data.objects[x].id)||spawnedRedMarkers.id.push(data.objects[x].id),aliveRedMarkers.push(data.objects[x].id),redAircraftIconGroup.getLayer(data.objects[x].id)?(redAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),redAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup),redAircraftIconGroup.getLayer(data.objects[x].id).setRotationAngle(aircraftHeading)):(redAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.addTo(map))}if(attackType.includes(data.objects[x].Name)){let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftAttackIconRed,rotationAngle:aircraftHeading,rotationOrigin:"center center"}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedRedMarkers.id.includes(data.objects[x].id)||spawnedRedMarkers.id.push(data.objects[x].id),aliveRedMarkers.push(data.objects[x].id),redAircraftIconGroup.getLayer(data.objects[x].id)?(redAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),redAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup),redAircraftIconGroup.getLayer(data.objects[x].id).setRotationAngle(aircraftHeading)):(redAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.addTo(map))}if(awacsType.includes(data.objects[x].Name)){let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftAwacsIconRed,rotationAngle:aircraftHeading,rotationOrigin:"center center"}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedRedMarkers.id.includes(data.objects[x].id)||spawnedRedMarkers.id.push(data.objects[x].id),aliveRedMarkers.push(data.objects[x].id),redAircraftIconGroup.getLayer(data.objects[x].id)?(redAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),redAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup),redAircraftIconGroup.getLayer(data.objects[x].id).setRotationAngle(aircraftHeading)):(redAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.addTo(map))}if(tankerType.includes(data.objects[x].Name)){let aircraftMarker=L.marker([mapIconLat,mapIconLong],{icon:aircraftTankerIconRed,rotationAngle:aircraftHeading,rotationOrigin:"center center"}).bindPopup(customPopup,customOptions);aircraftMarker._leaflet_id=data.objects[x].id,spawnedRedMarkers.id.includes(data.objects[x].id)||spawnedRedMarkers.id.push(data.objects[x].id),aliveRedMarkers.push(data.objects[x].id),redAircraftIconGroup.getLayer(data.objects[x].id)?(redAircraftIconGroup.getLayer(data.objects[x].id).setLatLng(newLatLng),redAircraftIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup),redAircraftIconGroup.getLayer(data.objects[x].id).setRotationAngle(aircraftHeading)):(redAircraftIconGroup.addLayer(aircraftMarker),aircraftMarker.addTo(map))}}}for(x in spawnedRedMarkers.id)aliveRedMarkers.includes(spawnedRedMarkers.id[x])||redAircraftIconGroup.clearLayers(spawnedRedMarkers.id[x])}