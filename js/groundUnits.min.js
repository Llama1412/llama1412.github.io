const groundunitsDebug=!1;let groundunitsIconGroup=L.layerGroup(),groundunitsIcon=L.Icon.extend({options:{iconSize:[24,24],iconAnchor:[17,17],popupAnchor:[0,-15]}}),aaaIconRed=new groundunitsIcon({iconUrl:"images/icons/aaa-icon-red.png"}),adIconRed=new groundunitsIcon({iconUrl:"images/icons/ad-icon-red.png"}),radarIconRed=new groundunitsIcon({iconUrl:"images/icons/radar-icon-red.png"}),aaaIconBlue=new groundunitsIcon({iconUrl:"images/icons/aaa-icon-blue.png"}),adIconBlue=new groundunitsIcon({iconUrl:"images/icons/ad-icon-blue.png"}),radarIconBlue=new groundunitsIcon({iconUrl:"images/icons/radar-icon-blue.png"});function updateGroundunitIcons(data){for(x in(globalDebug||groundunitsDebug)&&console.log("DEBUG - updateFarpIcons() - Updating Ground Unit Markers..."),data.objects)if(2===data.objects[x].Type.level1){let mapIconLat=data.objects[x].LatLongAlt.Lat,mapIconLong=data.objects[x].LatLongAlt.Long,unitType,unitCoalition,radarIconsRed=["S-300PS 40B6M tr","S-300PS 40B6MD sr","Kub 1S91 str","1L13 EWR","Dog Ear radar"],samIconsRed=["S-300PS 5P85C ln","Kub 2P25 ln","Osa 9A33 ln"],aaaIconsRed=["ZSU-23-4 Shilka","2S6 Tunguska"],radarIconsBlue=[""],samIconsBlue=[""],aaaIconsBlue=["M1097 Avenger"];2===data.objects[x].Type.level1&&radarIconsRed.includes(data.objects[x].Name)||radarIconsBlue.includes(data.objects[x].Name)?unitType="Radar":2===data.objects[x].Type.level1&&samIconsRed.includes(data.objects[x].Name)||samIconsBlue.includes(data.objects[x].Name)?unitType="Sam":(2===data.objects[x].Type.level1&&aaaIconsRed.includes(data.objects[x].Name)||aaaIconsBlue.includes(data.objects[x].Name))&&(unitType="AAA"),unitCoalition=2===data.objects[x].CoalitionID?"Blue":1===data.objects[x].CoalitionID?"Red":3===data.objects[x].CoalitionID?"Neutral":"Unknown";let customPopup='<table class="pixel-popup-table"><tr><td><strong>Name:</strong></td><td class="right">'+data.objects[x].Name+'</td></tr><tr><td><strong>Unit Type:</strong></td><td class="right">'+unitType+'</td></tr><tr><td><strong>Coalition:</strong></td><td class="right">'+unitCoalition+'</td></tr><tr><td><strong>Altitude:</strong></td><td class="right">'+Math.trunc(3.28*data.objects[x].LatLongAlt.Alt)+" FT</td></tr></table>",customOptions={maxWidth:"500",className:"pixel-custom-popup"};if(1===data.objects[x].CoalitionID&&radarIconsRed.includes(data.objects[x].Name)){let groundunitMarker=L.marker([mapIconLat,mapIconLong],{icon:radarIconRed}).bindPopup(customPopup,customOptions);groundunitMarker._leaflet_id=data.objects[x].id,groundunitsIconGroup.getLayer(data.objects[x].id)?((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} already found in groundunitsIconGroup - Updating`),groundunitsIconGroup.getLayer(data.objects[x].id).setIcon(radarIconRed),groundunitsIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup)):((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} Created - New Icon`),groundunitsIconGroup.addLayer(groundunitMarker),groundunitMarker.setZIndexOffset(-100),groundunitMarker.addTo(map))}else if(1===data.objects[x].CoalitionID&&samIconsRed.includes(data.objects[x].Name)){let groundunitMarker=L.marker([mapIconLat,mapIconLong],{icon:adIconRed}).bindPopup(customPopup,customOptions);groundunitMarker._leaflet_id=data.objects[x].id,groundunitsIconGroup.getLayer(data.objects[x].id)?((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} already found in groundunitsIconGroup - Updating`),groundunitsIconGroup.getLayer(data.objects[x].id).setIcon(adIconRed),groundunitsIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup)):((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} Created - New Icon`),groundunitsIconGroup.addLayer(groundunitMarker),groundunitMarker.setZIndexOffset(-100),groundunitMarker.addTo(map))}else if(1===data.objects[x].CoalitionID&&aaaIconsRed.includes(data.objects[x].Name)){let groundunitMarker=L.marker([mapIconLat,mapIconLong],{icon:aaaIconRed}).bindPopup(customPopup,customOptions);groundunitMarker._leaflet_id=data.objects[x].id,groundunitsIconGroup.getLayer(data.objects[x].id)?((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} already found in groundunitsIconGroup - Updating`),groundunitsIconGroup.getLayer(data.objects[x].id).setIcon(aaaIconRed),groundunitsIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup)):((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} Created - New Icon`),groundunitsIconGroup.addLayer(groundunitMarker),groundunitMarker.setZIndexOffset(-100),groundunitMarker.addTo(map))}if(2===data.objects[x].CoalitionID&&radarIconsBlue.includes(data.objects[x].Name)){let groundunitMarker=L.marker([mapIconLat,mapIconLong],{icon:radarIconBlue}).bindPopup(customPopup,customOptions);groundunitMarker._leaflet_id=data.objects[x].id,groundunitsIconGroup.getLayer(data.objects[x].id)?((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} already found in groundunitsIconGroup - Updating`),groundunitsIconGroup.getLayer(data.objects[x].id).setIcon(radarIconBlue),groundunitsIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup)):((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} Created - New Icon`),groundunitsIconGroup.addLayer(groundunitMarker),groundunitMarker.setZIndexOffset(-100),groundunitMarker.addTo(map))}else if(2===data.objects[x].CoalitionID&&samIconsBlue.includes(data.objects[x].Name)){let groundunitMarker=L.marker([mapIconLat,mapIconLong],{icon:adIconBlue}).bindPopup(customPopup,customOptions);groundunitMarker._leaflet_id=data.objects[x].id,groundunitsIconGroup.getLayer(data.objects[x].id)?((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} already found in groundunitsIconGroup - Updating`),groundunitsIconGroup.getLayer(data.objects[x].id).setIcon(adIconBlue),groundunitsIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup)):((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} Created - New Icon`),groundunitsIconGroup.addLayer(groundunitMarker),groundunitMarker.setZIndexOffset(-100),groundunitMarker.addTo(map))}else if(2===data.objects[x].CoalitionID&&aaaIconsBlue.includes(data.objects[x].Name)){let groundunitMarker=L.marker([mapIconLat,mapIconLong],{icon:aaaIconBlue}).bindPopup(customPopup,customOptions);groundunitMarker._leaflet_id=data.objects[x].id,groundunitsIconGroup.getLayer(data.objects[x].id)?((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} already found in groundunitsIconGroup - Updating`),groundunitsIconGroup.getLayer(data.objects[x].id).setIcon(aaaIconBlue),groundunitsIconGroup.getLayer(data.objects[x].id)._popup.setContent(customPopup)):((globalDebug||groundunitsDebug)&&console.log("DEBUG - updateGroundunitIcons() - "+`Marker ${data.objects[x].id} Created - New Icon`),groundunitsIconGroup.addLayer(groundunitMarker),groundunitMarker.setZIndexOffset(-100),groundunitMarker.addTo(map))}}}